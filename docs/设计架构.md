# 设计架构

## 总览
应用由"渲染子系统 + UI 框架 + 业务视图 + 模型与配置"组成：
- Renderer/RenderData/IconCache：渲染与资源
- UiRoot/UiPage/UiPanel/UiGrid 等：布局与交互
- 各业务页面：Home/Data/...
- ThemeManager/AppConfig：主题与持久化

## 渲染管线
- 顶点生成：矩形转 NDC 顶点缓冲
- 片元着色：圆角矩形 SDF、纹理采样 + tint
- 剪裁：逻辑像素裁剪→设备像素剪裁矩形→glScissor

## 事件与动画
- UiRoot 统一分发鼠标/滚轮事件与捕获
- 组件内部维护交互与动画（如 NavRail/UiTabView 等）
- 主窗口使用 QTimer 以 ~60fps 驱动 tick()

## 主题传播
- ThemeManager 推导有效配色（跟随系统/强制亮暗）
- UiRoot 递归调用 onThemeChanged() 向下游传播

## 线程模型
- OpenGL 相关调用仅在拥有上下文的 UI 线程
- 数据模型通常在 UI 线程变更；如需异步，注意线程安全与调度